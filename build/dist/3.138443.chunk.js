(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{345:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return n.default.createElement(o.default,{title:e.title,isShow:e.isShow,onClose:e.onClose},n.default.createElement(r.default,{showType:"right",jsonData:e.curShowJsonData||"{}"}))};var n=l(a(1)),r=l(a(51)),o=l(a(67));function l(e){return e&&e.__esModule?e:{default:e}}},346:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=d(a(21)),r=d(a(45)),o=d(a(36)),l=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();a(20),a(26),a(35);var i=a(1),u=d(i),s=d(a(51)),c=d(a(67));function d(e){return e&&e.__esModule?e:{default:e}}function f(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var p=o.default.Item,m=function(e){function t(){var e,a,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=Array(r),l=0;l<r;l++)o[l]=arguments[l];return a=n=f(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),n.handleChangeJsonArea=function(e){n.props.form.setFieldsValue({msgData:e})},f(n,a)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.Component),l(t,[{key:"render",value:function(){var e=this.props.form.getFieldDecorator;return u.default.createElement(c.default,{title:this.props.title,isShow:this.props.isShow,onClose:this.props.onClose},u.default.createElement(o.default,{layout:"inline",onSubmit:this.props.onOk},u.default.createElement(p,{label:"店铺ID"},e("shopID",{rules:[{required:!0,message:"请输入店铺ID!"}]})(u.default.createElement(r.default,{style:{width:240}}))),u.default.createElement(p,{label:"集团ID"},e("groupID",{rules:[{required:!0,message:"请输入集团ID!"}]})(u.default.createElement(r.default,{style:{width:240}}))),u.default.createElement(p,{label:"店铺名称"},e("shopName",{rules:[{required:!0,message:"请输入店铺名称!"}]})(u.default.createElement(r.default,{style:{width:240}}))),u.default.createElement(p,{label:"需要插入的账单的JSON",className:"format-item-row"},e("msgData",{rules:[{required:!0,message:"需要插入的账单的JSON!"}]})(u.default.createElement("div",null,u.default.createElement(s.default,{showType:"all",onChange:this.handleChangeJsonArea,jsonData:this.props.curEditJsonData||"{}"})))),u.default.createElement(p,{wrapperCol:{span:12}},u.default.createElement(n.default,{type:"primary",htmlType:"submit",loading:this.props.submitLoading},"确定修改"))))}}]),t}(),h=o.default.create()(m);t.default=h},347:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=s(a(21)),r=s(a(45)),o=s(a(68)),l=s(a(36)),i=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();a(20),a(26),a(96),a(35);var u=s(a(1));function s(e){return e&&e.__esModule?e:{default:e}}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var d=l.default.Item,f=o.default.Option,p=function(e){function t(){var e,a,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=Array(r),l=0;l<r;l++)o[l]=arguments[l];return a=n=c(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),n.state={curCityArea:[]},n.handleSearch=function(e){e.preventDefault(),n.props.form.validateFields(function(e,t){n.props.getFormValues(t)})},c(n,a)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,u.default.Component),i(t,[{key:"render",value:function(){var e=this.props.form.getFieldDecorator;return u.default.createElement(l.default,{layout:"inline",onSubmit:this.handleSearch},u.default.createElement(d,{label:"店铺ID"},e("shopID")(u.default.createElement(r.default,null))),u.default.createElement(d,{label:"集团ID"},e("groupID")(u.default.createElement(r.default,null))),u.default.createElement(d,{label:"消息类型"},e("msgType")(u.default.createElement(o.default,{style:{width:120}},u.default.createElement(f,{value:""},"全部"),u.default.createElement(f,{value:"5001"},"获取日志"),u.default.createElement(f,{value:"5002"},"获取账单信息"),u.default.createElement(f,{value:"5003"},"更新账单信息")))),u.default.createElement(d,null,u.default.createElement(n.default,{type:"primary",icon:"search",htmlType:"submit"},"查询")))}}]),t}(),m=l.default.create()(p);t.default=m},549:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=y(a(160)),r=y(a(39)),o=y(a(21)),l=y(a(113)),i=y(a(19)),u=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();a(145),a(38),a(20),a(112),a(55);var s=a(1),c=y(s),d=y(a(114)),f=a(27),p=y(a(347)),m=y(a(346)),h=y(a(345));function y(e){return e&&e.__esModule?e:{default:e}}function g(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var b=function(e){function t(){var e,a,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,l=Array(o),i=0;i<o;i++)l[i]=arguments[i];return a=n=g(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),n.state={isShowModal:!1,loading:!1,isEdit:!1,currentPageNumber:1,dataSource:[],filterConditions:{}},n.getOrderList=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=n.state.filterConditions,a=JSON.stringify(Object.assign({},e,t));n.setState({loading:!0}),f.myAxios.post("/saas/support/msg/all",a).then(function(e){"000"===e.code?n.setState({loading:!1,dataSource:(0,f.setRowKey)(e.data.msgRecordList)}):n.setState({loading:!1})}).catch(function(e){n.setState({loading:!1}),r.default.error("获取账单失败")})},n.updateOrderList=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=JSON.stringify(Object.assign(e));n.setState({submitLoading:!0}),f.myAxios.post("/saas/support/order/update",t).then(function(e){"000"===e.code?(r.default.success(e.msg),n.getOrderList()):r.default.error(e.msg)}).catch(function(e){r.default.error("操作失败")}).finally(function(){n.setState({submitLoading:!1})})},n.saveFormRef=function(e){n.form=e},n.getFormValues=function(e){n.setState({filterConditions:e},function(){n.getOrderList()})},n.handlePaginationChange=function(e){n.setState({currentPageNumber:e})},n.handleOpen=function(e){n.setState({isShow:!0,curEditJsonData:e.responseData||""},function(){n.form.setFieldsValue({shopID:e.shopID,groupID:e.groupID,shopName:e.shopName,msgData:e.responseData||""})})},n.handleClose=function(){n.setState({isShow:!1})},n.handleOk=function(e){e.preventDefault(),n.form.validateFieldsAndScroll(function(e,t){if(!e)try{JSON.parse(t.msgData),n.updateOrderList(t)}catch(e){r.default.error("插入的JSON格式不正确,请检查")}})},n.handleShowJsonFormat=function(e){n.setState({isShowSlideFormat:!0,curShowJsonData:e.responseData||""})},n.handleSlideFormatClose=function(){n.setState({isShowSlideFormat:!1})},g(n,a)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.Component),u(t,[{key:"componentDidMount",value:function(){this.getOrderList()}},{key:"render",value:function(){var e,t=this.state,a=t.dataSource,r=t.loading,u=t.currentPageNumber,s=t.submitLoading,f=(e=this,[{title:"记录ID",dataIndex:"itemID",key:"itemID"},{title:"所属集团ID",dataIndex:"groupID",key:"groupID"},{title:"店铺ID",dataIndex:"shopID",key:"shopID"},{title:"店铺名称",dataIndex:"shopName",key:"shopName",render:function(e,t,a){return e||"--"}},{title:"订单号",dataIndex:"orderKey",key:"orderKey",render:function(e){return e||"--"}},{title:"消息ID",dataIndex:"msgID",key:"msgID"},{title:"消息名称",dataIndex:"msgName",key:"msgName"},{title:"消息类型",dataIndex:"msgType",key:"msgType"},{title:"action",dataIndex:"action",key:"记录状态"},{title:"返回消息",dataIndex:"responseData",key:"responseData",width:200,render:function(t,a){return c.default.createElement(c.default.Fragment,null,c.default.createElement("textarea",{readOnly:!0,defaultValue:""+t}),c.default.createElement(l.default,{placement:"right",title:"点击查看"},c.default.createElement(i.default,{className:"show-code-icon",type:"code",onClick:function(){return e.handleShowJsonFormat(a)}})))}},{title:"修改时间",dataIndex:"actionTime",key:"actionTime"},{title:"创建时间",dataIndex:"createTime",key:"createTime"},{title:"操作",dataIndex:"other",key:"other",render:function(t,a,n){return"5002"==a.msgType?c.default.createElement(o.default,{size:"small",type:"primary",onClick:function(){return e.handleOpen(a,n)}},"修改"):null}}]),y=Object.assign(d.default.pagination,{current:u,onChange:this.handlePaginationChange});return c.default.createElement("div",{className:"page-right-container"},c.default.createElement("div",{className:"title"},c.default.createElement("h2",null,"查询账单")),c.default.createElement("div",{className:"search-bar"},c.default.createElement(p.default,{getFormValues:this.getFormValues})),c.default.createElement("div",null,c.default.createElement(n.default,{loading:r,dataSource:a,bordered:!0,columns:f,pagination:y})),c.default.createElement(m.default,{isEdit:!0,ref:this.saveFormRef,title:"编辑",submitLoading:s,curEditJsonData:this.state.curEditJsonData,isShow:this.state.isShow,onClose:this.handleClose,onOk:this.handleOk}),c.default.createElement(h.default,{title:"查看",isShow:this.state.isShowSlideFormat,curShowJsonData:this.state.curShowJsonData,onClose:this.handleSlideFormatClose}))}}]),t}();t.default=b}}]);